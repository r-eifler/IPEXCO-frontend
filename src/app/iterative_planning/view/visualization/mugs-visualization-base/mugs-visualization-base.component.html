@let step = step$ | async;

@if (step && stepStatusType != PlanRunStatus.running && stepStatusType != PlanRunStatus.pending && stepStatusType != PlanRunStatus.failed)
{
  <app-page>
    <app-page-content>
      <app-page-section>
        <app-page-section-content>
          <div [id]="containerHeaderId" class="svg-container"></div>
        </app-page-section-content>
      </app-page-section>
      <br/>
      <br/>
      <app-page-section>
        <app-page-section-content>
          <app-page-section-title>{{ containerGoalInteractionSectionTest }}</app-page-section-title>
        </app-page-section-content>
        <app-page-section-content style="width: 50%;">
          @for (property of selectedPlanProperties; track property._id;)
          {
            <app-editable-list-entry>
                <app-plan-property-panel [property]="property" style="margin: 5px;"></app-plan-property-panel>
                <app-editable-list-entry-suffix style="display: flex;">
                  @if (stepStatusType != PlanRunStatus.not_solvable && length > 0){
                    <mat-icon
                      [ngStyle]="{
                        color: planPropertiesCriticality[property.name],
                        backgroundColor: planPropertiesCriticality[property.name],
                        borderRadius: '20px',
                        margin: '7px 0 0 0'
                      }">
                      circle-icon
                    </mat-icon>
                  }
                  <button mat-icon-button (click)="removeselectedPlanProperty(property)" type="button" [disabled]="property.globalHardGoal"><mat-icon>delete</mat-icon></button>
                </app-editable-list-entry-suffix>
            </app-editable-list-entry>
          }
        </app-page-section-content>
      </app-page-section>
      <br/>
      <br/>
      <app-page-section>
        <app-page-section-content>
          <app-page-section-title>Selection Result</app-page-section-title>
          <div id="sec-result" class="badge-panel">
            No goals selected
          </div>
        </app-page-section-content>
      </app-page-section>
    </app-page-content>
  </app-page>
}
